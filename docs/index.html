<!DOCTYPE html>
<html>
<head>
  <title>Reverse Clock</title>
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,600,600i"> -->
  <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous"> -->
  <style>
    #timerContainer {
      display:flex;
      justify-content:center;
      align-items:center;
      /* font-family: 'Source Sans Pro', sans-serif; */
      font-weight: 300;
      width:700px;
      margin:20px auto;
      min-height: 60px;
      border-top:0px;
    }
    .timer, .reset {
      float:left;
      width: 70%;
      padding: 20px 0;
      font-size: 24px;
      text-align:center;
      color: #fff;
      background: #A90000;
      cursor: pointer
    }
    .reset {
      background: #c20505;
      color: white;
    }
    .reset:hover {
      background: #550000;
    }
    .lighter {
      background: #CC0000
    }
    .clock-time, .clock, .format, .decrement {
      display:flex;
      justify-content:center;
      align-items:center;
    }
    h3{
      padding-right: 2rem;
    }

  </style>
</head>
<body>
  <!-- <div class="format"> <h2>Format - hours:minutes:seconds</h2>  </div> -->
  <div id="timerContainer">
    <!-- <div class="timer" onclick="startTimer()">Time</div> -->
    <!-- <div class="startTimer reset" onclick="startTimer()" >
      <i class="fas fa-play">play</i>
    </div> -->
    <!-- <div class="pauseTimer reset" onclick="pauseTimer()" >
      <i class="fas fa-pause">pause</i>
    </div> -->
    <div class="resetTimer reset" onclick="resetTimer()">Reset Clock to Forward Time</div>
  </div>
  <form class="decrement"> 
    <label for="decrementValue">Go back in time (s): </label>
    <input type="number" name="decrementValue" value = "0" min="0" max="100" id="decrementValue">  
    <button type="button" class="startTimer" onclick="startTimer()">Reverse Time</button>
  </form>

  <div class="clock-time" data-testid="clock-time"></div>
  <div class= "clock"> 
    <canvas id="canvas" width="400" height="400"
      style="background-color:#333">
    </canvas>
  </div>
  

  <script type="text/javascript" src="index.js"></script>
  
  <!-- for testing purposes only-->
  <!-- <script> 
    let startTimerButton = document.querySelector('.startTimer');
    let pauseTimerButton = document.querySelector('.pauseTimer');
    let startTime = new Date().getTime();
    let updatedTime;
    let difference;
    let reverseAmount = document.getElementById("decrementValue").value

    // let canvas = document.getElementById("canvas");
    // let ctx = canvas.getContext("2d");
    // let radius = canvas.height / 2;
    // ctx.translate(radius, radius);
    // radius = radius * 0.90

    window.onload = (event) => {
      setInterval(drawClock, 1000);
    };

    function startTimer(){
      reverseAmount = document.getElementById("decrementValue").value

      startTime = new Date().getTime();

      paused = 0;
      running = 1;
      startTimerButton.disabled = true;
      startTimerButton.style.cursor = "auto";

    }

    function resetTimer(){
      document.getElementById("decrementValue").value = 0
      reverseAmount = document.getElementById("decrementValue").value

      difference = 0;
      startTime = new Date().getTime();
      startTimerButton.disabled = false;
      startTimerButton.style.cursor = "pointer";

    }

    function drawClock() {
      // drawFace(ctx, radius);
      // drawNumbers(ctx, radius);
      drawTime(ctx, radius);
    }

    // function drawFace(ctx, radius) {
    //   let grad;
    //   ctx.beginPath();
    //   ctx.arc(0, 0, radius, 0, 2*Math.PI);
    //   ctx.fillStyle = 'white';
    //   ctx.fill();
    //   grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
    //   grad.addColorStop(0, '#333');
    //   grad.addColorStop(0.5, 'white');
    //   grad.addColorStop(1, '#333');
    //   ctx.strokeStyle = grad;
    //   ctx.lineWidth = radius*0.1;
    //   ctx.stroke();
    //   ctx.beginPath();
    //   ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
    //   ctx.fillStyle = '#333';
    //   ctx.fill();
    // }

    // function drawNumbers(ctx, radius) {
    //   let ang;
    //   let num;
    //   ctx.font = radius*0.15 + "px arial";
    //   ctx.textBaseline="middle";
    //   ctx.textAlign="center";
    //   for(num = 1; num < 13; num++){
    //     ang = num * Math.PI / 6;
    //     ctx.rotate(ang);
    //     ctx.translate(0, -radius*0.85);
    //     ctx.rotate(-ang);
    //     ctx.fillText(num.toString(), 0, 0);
    //     ctx.rotate(ang);
    //     ctx.translate(0, radius*0.85);
    //     ctx.rotate(-ang);
    //   }
    // }


    function drawTime(ctx, radius){

      updatedTime = new Date().getTime()
      let decrementBySec = parseInt(reverseAmount) === 0 ? parseInt(reverseAmount) : (parseInt(reverseAmount)+1)
      // //amount of time in ms to go backwards by
      difference =  (updatedTime - startTime) * decrementBySec; 
      // console.log(difference/1000)
      console.log("diff: ", difference/1000)
      // no. of miliseconds since Jan 1 1970 (in reverse)
      let reverseTime = new Date()
      reverseTime.setTime(updatedTime - difference)
      console.log(reverseTime)

      let reverseHours = reverseTime.getHours()
      let reverseMinutes = reverseTime.getMinutes()
      let reverseSeconds = reverseTime.getSeconds()
      
      document.querySelector(".clock-time").innerHTML ="Current Time: "+ reverseHours +" hour " + reverseMinutes + " minutes " + reverseSeconds + " seconds." 

      // //hour
      // reverseHours=reverseHours%12;
      // reverseHours=(reverseHours*Math.PI/6)+
      // (reverseMinutes*Math.PI/(6*60))+
      // (reverseSeconds*Math.PI/(360*60));
      
      // drawHand(ctx, reverseHours, radius*0.5, radius*0.07);
      // //minute
      // reverseMinutes=(reverseMinutes*Math.PI/30)+(reverseSeconds*Math.PI/(30*60));
      
      // drawHand(ctx,reverseMinutes, radius*0.8, radius*0.07);
      // // second
      // reverseSeconds=(reverseSeconds*Math.PI/30);
      
      // drawHand(ctx,reverseSeconds, radius*0.9, radius*0.02);
      
    }

    // function drawHand(ctx, pos, length, width) {
    //     ctx.beginPath();
    //     ctx.lineWidth = width;
    //     ctx.lineCap = "round";
    //     ctx.moveTo(0,0);
    //     ctx.rotate(pos);
    //     ctx.lineTo(0, -length);
    //     ctx.stroke();
    //     ctx.rotate(-pos);
    // }
  </script> -->
</body>
</html>